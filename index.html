<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let contas = [["Lucas Felinto", "22/10/2001", "81998650161", 1, 1000], ["Matheus Henrique", "21/06/2000", "81988834392", 2, 2000], ["Carlos Neto", "dd/mm/yyyy", "81995039593", 3, 3000]]

        let numContas = 3

        alert("Bem-vindo ao Banco do Recife")

        criarConta()

        function criarConta() {
            let novaConta = [];
            let nome = prompt("Nome do Cliente:");
            novaConta.push(nome);

            let nascimento = prompt("Data de Nascimento (dd/mm/yyyy):");
            novaConta.push(nascimento);

            let telefone = prompt("Telefone:");
            novaConta.push(telefone);

            let nConta = ++numContas;
            novaConta.push(nConta);

            let saldo = 1000;
            novaConta.push(saldo);

            alert("Conta criada com sucesso, " + nome + "!")

            let mensagem = `
            Informações da sua conta:
            Nome: ${nome}
            Data de Nascimento: ${nascimento}
            Telefone: ${telefone}
            Número da Conta: ${nConta}
            Saldo Inicial: R$ ${saldo.toFixed(2)}

            Agradecemos por escolher o Banco do Recife.`;

            alert(mensagem)

            contas.push(novaConta)
        }

        function buscarIndiceConta(numeroConta) {
            for (let i = 0; i < contas.length; i++) {
                if (contas[i][3] === numeroConta) { // Verifica se o número da conta corresponde ao número buscado
                    return i; // Retorna o índice da conta encontrada
                }
            }
            return -1; // Retorna -1 se a conta não for encontrada
        }

        function verificarSaldoSaque(indiceConta, valor) {
            if (contas[indiceConta][4] >= valor) { // Verifica se o saldo é suficiente para o valor solicitado
                return true;
            } else {
                return false;
            }
        }

        function transferencia() {
            let numContaOrigem = parseInt(prompt("Número da conta de origem:"));

            // Busca o indice da conta e valida
            let indiceContaOrigem = buscarIndiceConta(numContaOrigem);
            if (indiceContaOrigem == -1) {
                alert("Conta de Origem não encontrada.");
                return;
            }
            // Exibi dados da Conta de Origem
            let mensagem = `
            Dados da conta de Origem:
            Nome: ${contas[indiceContaOrigem][0]}
            Número da Conta: ${contas[indiceContaOrigem][3]}
            Saldo Atual: R$ ${contas[indiceContaOrigem][4].toFixed(2)}`;
            alert(mensagem);
            // Solicitar o valor da transferência
            let valorTransferencia = parseFloat(prompt("Valor a ser transferido:"));
            let saldoValido = verificarSaldoSaque(indiceContaOrigem, valorTransferencia)
            if (!saldoValido) {
                alert(`Saldo insuficiente para realizar o saque.\nSaldo Atual: R$${saldoValido.toFixed(2)}\nValor Tentado: R$${valorTransferencia.toFixed(2)}`)
                return;
            }

            let numContaDestino = parseInt(prompt("Número da conta de destino:"));

            // Busca o indice da conta e valida
            let indiceContaDestino = buscarIndiceConta(numContaDestino);
            if (indiceContaDestino == -1) {
                alert("Conta de Destino não encontrada.");
                return;
            }

            // Exibi dados da Conta de Destino
            let mensagem2 = `
            Dados da conta de Origem:
            Nome: ${contas[indiceContaDestino][0]}
            Número da Conta: ${contas[indiceContaDestino][3]}`;
            alert(mensagem2);



            // Verificar se há saldo suficiente na conta de origem
            if (contaOrigem[4] < valorTransferencia) {
                alert("Saldo insuficiente na conta de origem!");
                return;
            }

            // Realizar a transferência
            contaOrigem[4] -= valorTransferencia;
            contaDestino[4] += valorTransferencia;

            alert(`Transferência de R$ ${valorTransferencia.toFixed(2)} realizada com sucesso!\n\n` +
                `Novo saldo da sua conta (Conta nº ${contaOrigem[3]}): R$ ${contaOrigem[4].toFixed(2)}`);
        }
        function sacar() {

        }

        function depositar() {

        }

        function exibir() {
            let numContaOrigem = parseInt(prompt("Digite o número da conta a exibir:"));

            // Busca o indice da conta e valida
            let indiceContaOrigem = buscarIndiceConta(numContaOrigem);
            if (indiceContaOrigem == -1) {
                alert("Conta não encontrada.");
                return;
            }

            // Exibi dados da conta do usuário
            let mensagem = `
            Informações da sua conta:
            Nome: ${contas[indiceContaOrigem][0]}
            Data de Nascimento: ${contas[indiceContaOrigem][1]}
            Telefone: ${contas[indiceContaOrigem][2]}
            Número da Conta: ${contas[indiceContaOrigem][3]}
            Saldo Atual: R$ ${contas[indiceContaOrigem][4].toFixed(2)}`;
            alert(mensagem)
            return;
        }

        function exibirTodasAsContas() {
            for (let i = 0; i < contas.length; i++) {
                let indiceContaOrigem = buscarIndiceConta(i + 1);
                if (indiceContaOrigem == -1) {
                    alert("Conta não encontrada.");
                } else {
                    let mensagem = `
                    Informações da sua conta:
                    Nome: ${contas[indiceContaOrigem][0]}
                    Data de Nascimento: ${contas[indiceContaOrigem][1]}
                    Telefone: ${contas[indiceContaOrigem][2]}
                    Número da Conta: ${contas[indiceContaOrigem][3]}
                    Saldo Atual: R$ ${contas[indiceContaOrigem][4].toFixed(2)}`;
                    alert(mensagem)
                }
            }
            return;
        }

        function remover() {

        }

    </script>
    <input type="button" onclick="criarConta()" value="Criar Conta" />
    <input type="button" onclick="transferencia()" value="Transferência" />
    <input type="button" onclick="sacar()" value="Sacar" />
    <input type="button" onclick="depositar()" value="Depositar" />
    <input type="button" onclick="exibir()" value="Exibir Conta" />
    <input type="button" onclick="exibirTodasAsContas()" value="Exibir todas as contas" />
    <input type="button" onclick="remover()" value="Deletar Conta" />
</body>

</html>